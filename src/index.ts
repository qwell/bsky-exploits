import yargs from 'yargs';
import { hideBin } from 'yargs/helpers';

const cli = yargs(hideBin(process.argv))
  .command(['exploit', 'e'], 'Show a list of available exploits.', (args) => {
    return args
      .option('auth-token', { desc: 'Authorization token', type: 'string', demandOption: true })
      .commandDir('exploits', {
        visit: (commandObject: { command: yargs.CommandModule }) => {
          return commandObject.command;
        },
      })
      .demandCommand(1, '')
      .recommendCommands();
  })
  .demandCommand(1, '')
  .recommendCommands();

void (async () => {
  await cli.argv;
})();
